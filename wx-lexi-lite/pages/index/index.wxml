<!--index.wxml-->

<view class="container">
 
  <view class='sear-box flex_row font-s' catchtap='handleToSearch'>
    <image src='../../images/sear@2.png'></image>
    <view class='search-box_text flex_row'>
      <image src='../../images/sear-icon@2.png'></image>
      <text>关键字/礼物/品牌馆/人</text>
    </view>
  </view>

 <view class="navbar-shim" wx:if='{{isNavbarAdsorb}}'></view>

  <view class='fx-tabs navbar-txet  {{isNavbarAdsorb?"navbar-adsorb":""}}'>
    <view class="tab-item {{ pageActiveTab == pageTab.name ? 'active' : '' }}" wx:for='{{ pageTabs }}' wx:for-item="pageTab" wx:key='{{ pageTab.rid }}' data-name='{{ pageTab.name }}' catchtap="handlePickCategory" wx:if="{{ !pageTab.disabled }}">
      <text>{{ pageTab.title }}</text>
    </view>


  </view>

  <!-- 生活馆 -->
  <view wx:if="{{ pageActiveTab == 'lifeStore' }}" class='bg-white'>
    <!-- 用户的信息和店铺的信息 -->
    <view class='owner-info_box'>
      <view class=' flex_row'>
        <!-- 店主信息 -->
        <view class='owner-avatar_box'>
          <image src="{{ lifeStore.logo }}"></image>
          <image src='../../images/huanzhaopian@2.png' class='owner-info_icon--style owner-info_camera_icon'></image>
        </view>

        <view class='owner-info-text_info'>
          <view>
            <image src='../../images/shixicon@2.png' class='owner-info_icon--style'></image>
            <text class='font-sxl'>{{ lifeStore.name }}的生活馆</text>
          </view>
          <view class='font-s qian-hui'>
            <text wx:if="{{ lifeStore.description }}">{{ lifeStore.description }}</text>
            <text wx:else>欢迎来到我的乐喜生活馆，我准备了一些独特好设计供你挑选</text>
          </view>
        </view>
      </view>

      <!-- 浏览过的人数 -->
      <view class='joinNumber'>
        <view class='theme-hui-color'>
          <text class='theme-color'>{{ shopInfo.browse_number }}</text> 浏览过设计馆</view>
        <view class='joinNumberBottom'>
          <view class='joinNumberl'>
            <view class='joinNumberlBox'>
              <view wx:key='{{ index }}' class='photo-round joinNumberlPhoto' wx:for='{{ BrowseQuantityInfo.user_parties }}'>
                <image src='{{ item.avatar }}'></image>
              </view>
              <view class='photo-round joinNumberlPhoto'>
                <open-data type='userAvatarUrl'></open-data>
              </view>
            </view>
          </view>
          <view class='browse-number-box fx-broadwise-e'>
            <view class='joinNumberR'>
              {{ shopInfo.browse_number > 999 ? '999+' : shopInfo.browse_number }}
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- 实习馆长 -->
    <view class="probation-box font-ss">
      <view class='time-top'>
        <view class='time-top '>
          <view class='probation-icon c-middle'>实习</view>
          <view class='shen-hui'>当前为实习馆主</view>
        </view>
        <view class='off-icon--style qian-hui font-s'>x</view>
      </view>
      <view class='probation-success-text'>成功在30天内销售3笔订单即可成为正式的达人馆主哦，如一个月内未达标准生活馆将被关闭，如重新申请需单独联系乐喜辅导员 申请。
      </view>
    </view>

    <!-- 选聘中心 -->
    <view class='pick-product-box c-crosswise-a font--white' bindtap="handleGoDistribute">
      <view></view>
      <view class='font-s'>
        <view>挑选乐喜优质商品上架</view>
        <view>品位生活，由此开启</view>
      </view>
      <view class='font-m'>选品中心 ></view>
    </view>

    <!-- 商品展示区域 -->
    <view class='theme-bg-color recommend-product-box'>

      <!-- 缺省 -->
      <view class='small-b-no_prodct fx-column--center qian-hui font-s' wx:if="{{ !storeProducts.length }}">
        <view class='no-sell-product_icon_box'>
          <image src='../../images/no-sell-product@2.png'></image>
        </view>
        <view>当前生活馆还没有上架商品</view>
        <view>你可以通过精选和探索挑选喜欢的好物</view>
      </view>

      <view class='tuijian' wx:for="{{ storeProducts }}" wx:for-index="idx" wx:for-item="product" wx:key="{{ product.rid }}" wx:if="{{ storeProducts.length }}">

        <!-- 店长头相 -->
        <view class='shopMaster'>
          <image src='{{ storeOwner.avatar }}' class='photo-round'></image>
          <text>馆长极力推荐</text>
          <!-- 垃圾箱 -->
          <view class="delete-icon" data-idx="{{ idx }}" data-rid="{{ product.rid }}" bindtap="handleRemoveFromStore" wx:if="{{ canAdmin }}">
            <image src='../../images/delete-icon@2.png'></image>
          </view>
        </view>

        <!-- 推荐理由介绍 -->
        <view class='shopRecommend theme-bg-color'>
          <view class='triangle theme-bg-color'></view>
          <text> {{ product.stick_text }} </text>
        </view>

        <!-- 物品的详情 -->
        <view class='shopRecommendGoods-box'>
          <fx-product-middleM originPric="{{ true }}" is_likeNumber="{{ true }}" price="{{ true }}" product="{{ product }}" bind:triggerEvent_product="handleGoProduct" data-rid="{{ product.rid }}"></fx-product-middleM>
        </view>

        <!-- 底部的喜欢和分享 -->
        <view class='recommendbottom'>
          <view data-id='{{item.rid}}' data-isLike='{{item.is_like}}' class='recommendbottomText {{item.is_like?"likeActive":""}}' catchtap='handleBindLike'>
            <view class='icon-like'>
              <image src='{{item.is_like?"../../images/Like@2.png":"../../images/dLike@2.png"}}'>
              </image>
            </view>
            <view>喜欢</view>
          </view>
          <view class='recommendbottomText'>
            <view class='icon-like'>
              <image src='../../images/share@2.png'></image>
            </view>
            <view catchtap='handleShareBox' data-shareStore='{{item}}' data-from="2">分享</view>
          </view>
          <view class='recommendbottomRen'>
            <image src='{{logo}}' class='photo-round'></image>
            <image src='{{logo}}' class='photo-round'></image>
            <image src='{{logo}}' class='photo-round'></image>
          </view>
        </view>
      </view>

      <!-- 查看更多 -->
      <view class="c-middle shen-hui font-s examine-more-box" wx:if="{{ loadingMore }}">
        查看更多好物
        <text class='fx-icon-nothing-lower'></text>
      </view>

    </view>

    <view>
      <view class='human new-goods'>
        本周最受欢迎
      </view>
      <view class='production new-goods_box'>
        <view class='productionGoods {{ (index+1)%5 == 0 ? "productionGoodsFive" : "" }}' wx:for="{{ popularProducts }}" wx:key='{{ item.rid }}'>
          <fx-product product="{{ item }}" like_number="{{ true }}" bind:triggerEvent_product="handleGoProduct" data-rid="{{ item.rid }}"></fx-product>
        </view>
      </view>
    </view>

  </view>

  <!-- 精选 -->
  <view wx:if="{{ pageActiveTab == 'featured' }}" class='bg-white'>
    <!-- 手动旋转木马 -->
    <view class='swiper-photo list'>
      <swiper autoplay="{{false}}" previous-margin="{{'64rpx'}}" next-margin="{{'64rpx'}}" bindchange="swiperChange">
        <block wx:for="{{handerAdvertisementList.banner_images}}" wx:key="{{index}}">
          <swiper-item bindtap='card_click' data-id="{{item.id}}" data-sort="{{item.sort}}">
            <image src="{{item.image}}" class="slide-image {{swiperIndex == index ? 'active' : ''}} {{swiperIndex == index+1 ? 'hidding' : ''}}">
              <view class="prompt-textwrap">
                <view class="prompt-text">{{item.title}}</view>
                <view class='prompt-destext'>{{item.subTitle}}</view>
              </view>
              <text class="slogan">{{item.slogan}}</text>
            </image>
          </swiper-item>
        </block>
      </swiper>
    </view>

    <!-- 开店指引 -->
    <view class="setUpShop-guide border-radius--8">
      <view class='time-top setUpShop-guide__top' wx:if="{{ !isSmallB }}">
        <view class=''>
          <view class='black-font'>分享好物赚钱，为自己购买省钱</view>
          <view class='qian-hui font-s'>没钱，没货，均可拥有设计馆了</view>
        </view>
        <view class='black-font font--white c-middle border-radius--8 c-theme-bg setUpshop-guide__btn' bindtap="handleApplyLifeStore">开馆指引</view>
      </view>
      <view class='flex_row font-s setUpShop-guide__bottom'>
        <view class=" c-line-D  setUpShop-guide__bottom__left ">
          <view class="setUpShop-guide__suona">
            <image src='../../images/set-up-shop-suona@2.png'></image>
          </view>
          <view>开馆</view>
          <view>头条</view>
        </view>
        <image class='setUpShop-guide__middle' src='../../images/set-up-shop-line.png'></image>
        <view class=''>
          <view>
            <text class='theme-green'>设计师ricky</text>
            <text>十秒</text>前开了自己的设计馆</view>
          <view>「
            <text>玮峰</text>」的设计馆
            <text>1</text>小时
            <text class='sell-order-quantity'>售出<text>200</text>单</text>
          </view>
        </view>
      </view>
    </view>

    <!-- 今日推荐 {{themeProduct.designs}} -->
    <view class=' '>
      <view class='c-importantGoodsTitle time-top font-xl category__title'>
        <text>今日推荐</text>
        <text wx:if="{{todayRecommendList.daily_recommends.length>9}}" class='hui-zi-m'>查看全部  <text class='fx-icon-nothing-right'></text> </text>
      </view>

      <scroll-view scroll-x class='c-importantGoodsBox  today-recommend-box'>
        <view class='today-recommend {{index==0?"padding-left--40rpx":""}} {{index==todayRecommendList.daily_recommends.length-1?"margin-right--40rpx":""}}' wx:for="{{todayRecommendList.daily_recommends}}" wx:key="{{index}}">
          <view class='all-product'>
            <image class='border-radius--8' src="{{item.cover}}"></image>
          </view>
          <view class='recommend-text theme-green'>
            <text class='font-ss'>{{item.recommend_label}}</text>
          </view>
          <view class='recommend-text'>
            <text class='font-m'>{{item.recommend_title}}</text>
          </view>
          <view class='recommend-text qian-hui'>
            <text class='font-ss'>{{item.recommend_description}}</text>
          </view>
        </view>
      </scroll-view>
    </view>

    <!-- "免运，奖励，优惠生活" -->
    <view class='material-benefits'>
      <view class='material-benefits-top qian-hui font-s'>免运，奖励，优惠生活</view>
      <view class='material-benefits_bottom c-crosswise-a'>
        <view class='font-s fx-column--center'>
          <image src='../../images/guess-and-win-cash@2.png'></image>
          <view>猜图赢现金</view>
        </view>
        <view class='font-s fx-column--center'>
          <image src='../../images/receiv-coupon@2x.png'></image>
          <view>领劵中心</view>
        </view>
        <view class='font-s fx-column--center'>
          <image src='../../images/no-logistics-icon@2x.png'></image>
          <view>包邮专区</view>
        </view>
      </view>
    </view>

    <!-- 人气推荐 wx:for='{{currentNewProduct.products}}' -->
    <view >
      <view class='human new-goods'>
        人气推荐
      </view>
      <swiper class='gratefulList-box margin-left--40rpx  margin-right--40rpx border-bottom'>
        <!-- 1 -->
        <swiper-item >
          <view class='production new-goods_box padding-left__right--0rpx '>
            <view class='productionGoods {{index==2||index==3||index==4?"one-row-three":""}}' wx:if="{{index<5}}" wx:for="{{gratefulList.products}}" wx:key='{{index}}'>
              <fx-product product="{{item}}" like_number="{{true}}" bind:triggerEvent_product='handleInfomation'></fx-product>
            </view>
          </view>
        </swiper-item>
        <!-- 2 -->
        <swiper-item>
          <view class='production new-goods_box padding-left__right--0rpx'>
            <view wx:if="{{4<index && index<10}}" class='productionGoods {{index==7||index==8||index==9?"one-row-three":""}}' wx:for="{{gratefulList.products}}" wx:key='{{index}}'>
              <fx-product product="{{item}}" like_number="{{true}}" bind:triggerEvent_product='handleInfomation'></fx-product>
            </view>
          </view>
        </swiper-item>
        <!-- 3 -->
        <swiper-item class="">
          <view class='production new-goods_box padding-left__right--0rpx'>
            <view wx:if="{{9<index && index<15}}" class='productionGoods {{index==12||index==13||index==14?"one-row-three":""}}' wx:for="{{gratefulList.products}}" wx:key='{{index}}'>
              <fx-product product="{{item}}" like_number="{{true}}" bind:triggerEvent_product='handleInfomation'></fx-product>
            </view>
          </view>
        </swiper-item>
      </swiper>
    </view>

    <!--中间 广告 -->
    <view class='probation-box advertisement-box '>
      <swiper autoplay="{{true}}" indicator-color="rgba(0, 0, 0, .3)" indicator-active-color='#fff' indicator-dots="{{true}}">
        <block wx:for="{{middleAdvertisementList.banner_images}}" data-rid="{{item.rid}}" wx:key="{{index}}">
          <swiper-item>
            <image src="{{item.image}}" class="slide-image" width="355" height="150" />
          </swiper-item>
        </block>
      </swiper>
    </view>

    <!-- 发现生活美学 {{themeProduct.designs}} -->
    <view class='c-importantGoods box--margin border-top'>
      <view class='c-importantGoodsTitle'>发现生活美学</view>
      <view class='c-importantGoodsBox  today-recommend-box'>
        <view class="life-beautiful-box" wx:for="123456790" wx:key="{{index}}">
          <view class='life-beautiful___photo'></view>
        </view>
      </view>
    </view>

    <!-- 乐喜优选 -->
    <view>
      <view class='c-importantGoodsTitle time-top font-xl category__title'>
        <text>乐喜优选</text>
        <text wx:if="{{lexiPick.products.length>3}}" class='hui-zi-m'>查看全部  <text class='fx-icon-nothing-right'></text> </text>
      </view>
      <view class='production new-goods_box'>
        <view wx:if="{{index<4}}" class='productionGoods' wx:for="{{lexiPick.products}}" wx:key='{{index}}'>
          <fx-product product="{{item}}" like_number="{{true}}" bind:triggerEvent_product='handleInfomation'></fx-product>
        </view>
      </view>
    </view>

    <!-- 种草清单 -->
    <view class="border-top margin-left--40rpx">
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-left--0rpx'>
        <text>种草清单</text>
        <text wx:if="{{9}}" class='hui-zi-m'>查看全部  <text class='fx-icon-nothing-right'></text> </text>
      </view>
      <view class='production new-goods_box padding-left--0rpx'>
        <view wx:if="{{index<4}}" class='flex-direction--column productionGoods ' wx:for="{{plantOrderList.life_records}}" wx:key='{{index}}'>

          <image src="{{item.cover}}" class="img--style"></image>
          <text class="font-s font-width--semibold text-two_line">{{item.title}}</text>
          <text class='font-ss shen-hui text-two_line'>{{item.description}}</text>
          <view class='plant-owner__box flex_row'>
            <image src="{{item.user_avator}}" class='plant-owner__photo'></image>
            <text class="font-s shen-hui">{{item.user_name}}</text>
          </view>
        </view>
      </view>
    </view>


  </view>

  <!-- 探索 -->
  <view wx:if="{{ pageActiveTab == 'explore' }}" class='bg-white'>

    <!-- 广告 -->
    <view class='probation-box advertisement-box'>
      <swiper autoplay="{{true}}" indicator-color="rgba(0, 0, 0, .3)" indicator-active-color='#fff' indicator-dots="{{true}}">
        <swiper-item wx:for="{{exploreAdvertisementList.banner_images}}" wx:key="{{index}}">
          <view class='advertisement-item'>
            <image src="{{item.image}}" class="slide-image" />
            <text class='explore-advertisement__title'>{{item.title}}</text>
            <text class='explore-advertisement__info'>{{item.description}}</text>
          </view>
        </swiper-item>
      </swiper>
    </view>

    <!-- 分类的 -->
    <view class='product-category-box '>
      <scroll-view scroll-x class='flex_row slither-box'>
        <view class='fx-column--center inline-block padding--27rpx {{index==0?"padding-left--40rpx":""}} {{index==categoryList.categories.length-1?"padding-right--40rpx":""}}' wx:for="{{categoryList.categories}}" wx:key='{{index}}'>
          <image class='product-category-icon' src='{{item.cover}}'></image>
          <view class='font-s'>{{item.name}}</view>
          <view class='font-ss qian-hui'>{{item.browse_count>0?item.browse_count+"人":" "}}</view>
        </view>
      </scroll-view>
    </view>

    <!-- 编辑推荐 {{themeProduct.designs}} -->
    <view class='border-bottom '>
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--32rpx recommend-product-box'>
        <text>编辑推荐</text>
        <text wx:if="{{editRecommendList.products.length>9}}" class='hui-zi-m'>查看全部  <text class='fx-icon-nothing-right'></text> </text>
      </view>
      <view class='c-importantGoodsBox margin-top--34rpx'>
        <scroll-view class='c-importantGoodsPhoto {{index==0?"margin-left--40rpx":""}} {{index==editRecommendList.products.length-1?"margin-right--40rpx":""}}' wx:for="{{editRecommendList.products}}" wx:key="{{index}}">
          <fx-product product="{{item}}" bind:triggerEvent_product="handleInfomation" oldPrice="{{true}}"></fx-product>
        </scroll-view>
      </view>
    </view>

    <!-- 特色品牌馆 -->
    <view class='border-bottom'>
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--32rpx'>
        <text>特色品牌馆</text>
        <text wx:if="{{editRecommendList.products.length>9}}" class='hui-zi-m'>查看全部  <text class='fx-icon-nothing-right'></text> </text>
      </view>

      <scroll-view scroll-x class='c-importantGoodsBox margin-top--34rpx recommend-product-box'>
        <view class='characteristic-box {{index==0?"margin-left--40rpx":""}} {{index==characteristicStoreList.stores.length-1?"margin-right--40rpx":""}}' wx:for="{{characteristicStoreList.stores}}" wx:for-item="items" wx:key="{{ index }}">
          <image src='{{items.bgcover}}-p50'></image>
          <view class='characteristic-info border-radius--8'>
            <view class='flex_row characteristic-box__title border-radius--8'>
              <view class='characteristic-log border-radius--8'>
                <image class='border-radius--8' src='{{items.logo}}'></image>
              </view>
              <view class='characteristic-title__text'>
                <text class='font--white font-xl text--hidden'>{{items.name}}</text>
                <view class='font-s shen-hui'>{{items.store_products_counts>0?items.store_products_counts+"件":""}}</view>
              </view>
            </view>
            <view class='time-top characteristic-box__middle'>
              <view class='characteristic-photo' wx:for="{{items.products_cover}}" wx:key="{{index}}" wx:for-item="item" wx:if="{{index<3}}">
                <image src='{{item}}' class='border-radius--8'></image>
              </view>

            </view>
            <view class='characteristic-watch_btn c-middle' data-index="{{index}}" data-rid="{{items.rid}}" catchtap="handleAddFollowed" wx:if="{{!items.is_followed}}">
              <image src='../../images/icon@2.png'></image>
              <text class='font--white black-font'>关注</text>
            </view>
            <view wx:else data-index="{{index}}" data-rid="{{items.rid}}" class='characteristic-watch_btn c-middle bg--hui' catchtap="handleDeleteFollowed">
              <text class='font--white black-font'>已关注</text>
            </view>
          </view>
        </view>
      </scroll-view>
    </view>

    <!-- 优质新品 {{themeProduct.designs}} -->
    <view class='border-bottom'>
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--32rpx'>
        <text>优质新品</text>
        <text wx:if="{{highQualityList.products.length>9}}" class='hui-zi-m'>查看全部  <text class='fx-icon-nothing-right'></text> </text>
      </view>
      <scroll-view scroll-x class='c-importantGoodsBox margin-top--34rpx recommend-product-box'>
        <view class='c-importantGoodsPhoto {{index==0?"padding-left--40rpx":""}} {{index==highQualityList.products.length-1?"margin-right--40rpx":""}}' wx:for="{{highQualityList.products}}" wx:key="{{index}}">
          <fx-product product="{{item}}" bind:triggerEvent_product="handleInfomation" oldPrice="{{true}}"></fx-product>
        </view>
      </scroll-view>
    </view>

    <!-- 集合 {{themeProduct.designs}} -->
    <view class='border-bottom'>
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--32rpx'>
        <text>集合</text>
        <text wx:if="{{gatherList.collections.length>9}}" class='hui-zi-m'>查看全部  <text class='fx-icon-nothing-right'></text> </text>
      </view>
      <scroll-view scroll-x class='c-importantGoodsBox margin-top--34rpx recommend-product-box'>
        <view class='all-product {{index==0?"margin-left--40rpx":""}} {{index==gatherList.collections.length-1?"margin-right--40rpx":""}}' data-id="{{item.id}}" wx:for="{{gatherList.collections}}" wx:key="{{index}}">
          <image class='border-radius--8' src="{{item.cover}}-p30"></image>
          <view class='competitive-pick-icon font-xss shen-hui c-middle'>精选</view>
          <view class='all-product_geishei font--white black-font'>{{item.name}}</view>
          <view class='all-product_miaoshu font--white black-font'>{{item.sub_name}}</view>
        </view>
      </scroll-view>
    </view>

    <!-- 特惠好设计 {{themeProduct.designs}} -->
    <view class='border-bottom'>
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--32rpx'>
        <text>特惠好设计</text>
        <text wx:if="{{gatherList.collections.length>9}}" class='hui-zi-m'>查看全部  <text class='fx-icon-nothing-right nothing-right__size'></text> </text>
      </view>
      <scroll-view scroll-x class='c-importantGoodsBox margin-top--34rpx recommend-product-box'>
        <view class='c-importantGoodsPhoto {{index==0?"margin-left--40rpx":""}} {{index==goodDesignList.products.length-1?"margin-right--40rpx":""}}' wx:for="{{goodDesignList.products}}" photo="1" wx:key="{{index}}">
          <fx-product photoSize="16" photo="2" product="{{item}}" bind:triggerEvent_product="handleInfomation" oldPrice="{{true}}"></fx-product>
        </view>
      </scroll-view>
    </view>

    <!-- 百元好物 {{themeProduct.designs}} -->
    <view class='border-bottom'>
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--32rpx'>
        <text>百元好物</text>
        <text wx:if="{{oneHundredList.products.length>8}}" class='hui-zi-m'>查看全部  <text class='fx-icon-nothing-right'></text> </text>
      </view>
      <scroll-view scroll-x class='c-importantGoodsBox margin-top--34rpx recommend-product-box'>
        <view class='c-importantGoodsPhoto height--372rpx {{index==0?"margin-left--40rpx":""}} {{index==oneHundredList.products.length-1?"margin-right--40rpx":""}}' wx:for="{{oneHundredList.products}}" wx:key="{{index}}">
          <fx-product product="{{item}}" photoSize="16" photo="2" bind:triggerEvent_product="handleInfomation" oldPrice="{{true}}"></fx-product>
        </view>
      </scroll-view>
    </view>

  </view>

  <!-- 官方信息 -->
  <fx-offcial></fx-offcial>

  <!-- 登陆注册模态框 -->
  <view wx:if="{{is_mobile}}" class='login-bind_box--style'>
    <fx-login bind:customevent='hanleOffLoginBox'></fx-login>
  </view>

  <view class="fx-back-home" bindtap="handleBackLifeStore" wx:if="{{ !canAdmin }}">
    <image src="../../images/icon-back-home@2x.png" class="icon-back-home"></image>
    <text>回到自己生活馆</text>
  </view>

</view>