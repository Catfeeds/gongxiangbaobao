<!--index.wxml-->
<fx-loading loading="{{ isLoading }}"></fx-loading>
<view class="container">
  <view class="c-middle sear-top">
    <view class='sear-box flex_row font-s' catchtap='handleToSearch'>
      <view class='search-box_text flex_row'>
        <image src='../../images/sear-icon@2.png'></image>
        <text>关键字/礼物/品牌馆/人</text>
      </view>
    </view>
  </view>
  <view class="navbar-shim" wx:if='{{isNavbarAdsorb}}'></view>

  <view class='fx-tabs  navbar-txet  {{isNavbarAdsorb?"navbar-adsorb":""}}'>
    <view class="tab-item {{ pageActiveTab == pageTab.name ? 'active' : '' }}" wx:for='{{ pageTabs }}' wx:for-item="pageTab" wx:key='{{ pageTab.rid }}' data-name='{{ pageTab.name }}' catchtap="handlePickCategory" wx:if="{{ !pageTab.disabled }}">
      <text>{{ pageTab.title }}</text>
    </view>
  </view>

  <!-- 生活馆  -->
  <view class="bg-white page-lifestore {{ pageActiveTab == 'lifeStore' ? 'active' : '' }}">
    <!-- 用户的信息和店铺的信息 -->
    <view class='owner-info_box'>
      <view class=' flex_row'>
        <!-- 店主信息 -->
        <view class='owner-avatar_box'>
          <image src="{{ lifeStore.logo + '-ava' }}" bindtap="{{canAdmin?'handleChangeLogo':''}}" wx:if="{{ lifeStore.logo }}" class="avatar"></image>
          <image src="../../images/avatar.png" bindtap="{{canAdmin?'handleChangeLogo':''}}" wx:else class="avatar"></image>
          <image src='../../images/huanzhaopian@2.png' class='owner-info_icon--style owner-info_camera_icon' bindtap="handleChangeLogo" wx:if="{{ canAdmin }}"></image>
          <!-- 进度条 -->
          <view class="upload-status__box" wx:if="{{ isUploading }}">
            <view class="progress" style="width:{{ uploadStatus }}%"></view>
          </view>
        </view>

        <view class="fx-column-start owner-info-text_info" bindtap="{{canAdmin?'handleEditStore':''}}">
          <view class="store-title">
            <image src='../../images/shixicon@2.png' class='owner-info_icon--style'></image>
            <text class='font-sxl'>{{ lifeStore.name }}的生活馆</text>
            <image src='../../images/icon-edit@2x.png' class="icon-edit" bindtap="handleEditStore" wx:if="{{ canAdmin }}"></image>
          </view>
          <view class='font-s qian-hui'>
            <text wx:if="{{ lifeStore.description }}">{{ lifeStore.description }}</text>
            <text wx:else>欢迎来到我的乐喜生活馆，我准备了一些独特好设计供你挑选</text>
          </view>
        </view>
      </view>

      <!-- 浏览过的人数 -->
      <view class='joinNumber height--120rpx' wx:if="{{ shopInfo.count > 0 }}">
        <view class='theme-hui-color'>
          生活馆被浏览过
          <text class='theme-color'>{{ shopInfo.browse_number }}</text> 次</view>
        <view class='joinNumberBottom'>
          <view class='joinNumberl'>
            <view class='joinNumberlBox'>
              <view wx:key='{{ index }}' class='photo-round joinNumberlPhoto' wx:for='{{ shopInfo.user_parties }}'>
                <image src='{{ item.avatar }}-ava'></image>
              </view>

            </view>
          </view>
          <view class='browse-number-box fx-broadwise-e'>
            <view class='joinNumberR'>
              {{ shopInfo.count > 999 ? '999+' : shopInfo.count }}
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- 实习馆长 -->
    <block wx:if="{{isCadet}}">
      <view class="probation-box font-ss probation-box__white" wx:if="{{ canAdmin }}">
        <view class='time-top'>
          <view class='time-top '>
            <view class='probation-icon c-middle '>实习</view>
            <view class='shen-hui'>当前为实习馆主</view>
          </view>
          <image catchtap="handleOffCadet" src="../../images/icon-close-bold@3x.png" class='off-icon--style qian-hui font-s'></image>
        </view>
        <view class='probation-success-text'>成功在30天内销售3笔订单即可成为正式的达人馆主哦，如一个月内未达标准生活馆将被关闭，如重新申请需单独联系乐喜辅导员 申请。
        </view>
      </view>
    </block>
    <!-- 选聘中心 -->
    <view class='pick-product-box c-crosswise-a font--white' bindtap="handleGoDistribute" wx:if="{{ canAdmin }}">
      <!-- 
      <view class='float'>
        <view style='z-index={{aIamge-2}}' animation="{{e}}">
          <image src='{{photo[aIamge-1].img}}'></image>
        </view>
        <view style='z-index={{aIamge-2}}' animation="{{d}}">
          <image src='{{photo[bIamge-1].img}}'></image>
        </view>
        <view style='z-index={{aIamge-2}}' animation="{{c}}">
          <image src='{{photo[cIamge-1].img}}'></image>
        </view>
        <view style='z-index={{aIamge-2}}' animation="{{b}}">
          <image src='{{photo[dIamge-1].img}}'></image>
        </view>
        <view style='z-index={{aIamge-2}}' animation="{{a}}">
          <image src='{{photo[eIamge-1].img}}'></image>
        </view>
      </view> -->
      <view class="swiper-false">
        <image src='https://static.moebeast.com/static/img/sweiper.png'></image>
      </view>
      <view class='font-s'>
        <view>挑选乐喜优质商品上架</view>
        <view>品位生活，由此开启</view>
      </view>
      <view class='font-m flex_row'>
        <text>选品中心</text>
        <image class="right-jian__bai" src="../../images/right-jian-bai.png"></image>
      </view>
    </view>

    <!-- 商品展示区域 -->
    <view class='theme-bg-color recommend-product-box'>

      <!-- 缺省 -->
      <view class='small-b-no_prodct fx-column--center qian-hui font-s' wx:if="{{ isEmpty }}">
        <view class='no-sell-product_icon_box'>
          <image src='../../images/no-sell-product@2.png'></image>
        </view>
        <view>当前生活馆还没有上架商品</view>
        <view>你可以通过精选和探索挑选喜欢的好物</view>
      </view>

      <view class='tuijian border-bottom padding-bottom--20rpx {{ idx == 0 ?"padding-top--40rpx" : "" }} {{ idx == storeProducts.length - 1 ? "margin-bottom--0rpx" : "" }}' wx:if="{{ !isEmpty }}" wx:for="{{ storeProducts }}" wx:for-index="idx" wx:for-item="distributeProduct"
        wx:key="{{ distributeProduct.rid }}-{{ distributeProduct.store_rid }}">
        <!-- 店长头相 -->
        <view class='shopMaster'>
          <image src='{{ lifeStore.logo }}-ava' class='photo-round'></image>
          <text>馆长极力推荐</text>
          <!-- 垃圾箱 -->
          <view class="delete-icon" data-idx="{{ idx }}" data-rid="{{ distributeProduct.rid }}" bindtap="handleRemoveFromStore" wx:if="{{ canAdmin }}">
            <image src='../../images/delete-icon@2.png'></image>
          </view>
        </view>

        <!-- 推荐理由介绍 -->
        <view class='shopRecommend theme-bg-color '>
          <view class='triangle theme-bg-color'></view>
          <text> {{ distributeProduct.stick_text }} </text>
        </view>

        <!-- 物品的详情 -->
        <view class='margin-top--20rpx margin-bottom--44rpx'>
          <view class="productMiddleBox" data-rid="{{ distributeProduct.rid }}" data-store-rid="{{ distributeProduct.store_rid }}" catchtap="handleViewProduct">

            <view class="productMiddleBoxPhoto" style='height:180rpx;width:180rpx'>
              <image src='{{ distributeProduct.cover + "-p16" }}' style='height:180rpx;width:180rpx' class="shopRecommendGoods-photo {{ !distributeProduct ? 'position-image' : 'active' }}" wx:if="{{ distributeProduct.cover }}"></image>

              <image style='height:180rpx;width:180rpx' class="shopRecommendGoods-photo {{ !distributeProduct ? 'position-image' : 'active' }}" wx:else></image>
              <view class='sell_up_text' wx:if="{{ distributeProduct.total_stock == 0 }}">售 罄</view>
            </view>

            <view class="shopRecommendGoodsR" style='height:180rpx;'>
              <view>
                <view class='two-line'>
                  <image class='logistics logistics' wx:if="{{ distributeProduct.is_free_postage }}"></image>
                  <text class='{{ photoHeight == 140 ? "line-two" : ""}}'>{{ distributeProduct.name }}</text>
                </view>
              </view>

              <!-- 价格和喜欢的人数 -->
              <view class='price-like-box'>
                <text wx:if="{{ distributeProduct.min_price == distributeProduct.min_sale_price }}" class='oldPrice oldPriceDecortion shopRecommendGoodsR-old'>¥{{ distributeProduct.min_price }}</text>

                <text class='current_price' wx:else>¥{{ distributeProduct.min_sale_price==0?distributeProduct.min_price:distributeProduct.min_sale_price }}</text>
                <text wx:if="{{ distributeProduct.like_count != 0 }}" class='shopRecommendGoodsR-old'>喜欢+{{ distributeProduct.like_count }}</text>
              </view>

            </view>
          </view>
        </view>

        <!-- 底部的喜欢和分享 -->
        <view class='recommendbottom'>
          <view data-id='{{ distributeProduct.rid }}' data-rid='{{ distributeProduct.rid }}' class='recommendbottomText {{ distributeProduct.is_like ? "likeActive" : "" }}' data-index="{{ idx }}" data-islike="{{ distributeProduct.is_like }}" catchtap='handleBindLike'>
            <view class='icon-like'>
              <image src='{{ distributeProduct.is_like ? "../../images/like@2.png" : "../../images/dLike@2.png" }}'>
              </image>
            </view>
            <view>喜欢</view>
          </view>
          <view class='recommendbottomText' catchtap='handleStickShareDistribute' data-shareStore='{{ distributeProduct }}' data-rid='{{ distributeProduct.rid }}' data-idx="{{ idx }}" data-is-distributed="{{ distributeProduct.is_distributed }}" data-from="2">
            <view class='icon-like'>
              <image src='../../images/share@2.png'></image>
            </view>
            <view>分享</view>
          </view>
          <view class='recommendbottomRen'>
            <image wx:for="{{distributeProduct.product_like_users}}" wx:key="{{index}}" wx:if="{{index<3}}" src='{{ item.avatar }}-ava' class='photo-round'></image>
          </view>
        </view>
      </view>

      <!-- 查看更多 -->
      <view class="c-middle border-bottom shen-hui font-s examine-more-box" catchtap="handleLoadingRecommend" wx:if="{{ isNextRecommend }}">
        查看更多好物
        <text class='fx-icon-nothing-lower'></text>
      </view>

    </view>

    <view>
      <view class='human new-goods margin-top--40rpx margin-bottom--0rpx'>
        本周最受欢迎
      </view>
      <view class='production new-goods_box'>
        <view class='productionGoods {{ (index+1)%5 == 0 ? "productionGoodsFive" : "" }}' wx:for="{{ popularProducts }}" wx:key='{{ item.rid }}'>
          <fx-product product="{{ item }}" photo="{{3}}" like_number="{{ true }}" bind:triggerEvent_product="handleGoProduct"></fx-product>
        </view>
      </view>
    </view>

  </view>

  <!-- 精选 -->
  <view class="bg-white page-featured {{ pageActiveTab == 'featured' ? 'active' : '' }}">
    <!-- 手动旋转木马 -->
    <view class='swiper-photo list'>
      <swiper circular autoplay="{{true}}" previous-margin="{{'20rpx'}}" next-margin="{{'100rpx'}}" bindchange="swiperChange">
        <block wx:for="{{handerAdvertisementList.banner_images}}" wx:key="{{index}}">
          <swiper-item catchtap="handleToInfo" data-type="{{item.type}}" data-link="{{item.link}}" data-title="{{item.title}}" data-rid="{{item.rid}}" class="flex_row--middle" data-id="{{item.id}}" data-sort="{{item.sort}}">
            <view class="slide-image slide-item__box {{swiperIndex == index ? 'active' : ''}} {{swiperIndex == index+1 ? 'hidding' : ''}}">
              <image src="{{item.image}}">
                <view class="prompt-textwrap">
                  <view class="prompt-text">{{item.title}}</view>
                  <view class='prompt-destext'>{{item.subTitle}}</view>
                </view>
                <text class="slogan">{{item.slogan}}</text>
              </image>
            </view>
          </swiper-item>
        </block>
      </swiper>
    </view>

    <!-- 开店指引 -->
    <view class="setUpShop-guide border-radius--8" wx:if="{{ !isSmallB }}">
      <view class='time-top setUpShop-guide__top border-bottom'>
        <view class=''>
          <view class='black-font'>分享好物赚钱，为自己购买省钱</view>
          <view class='qian-hui font-s'>没钱，没货，均可拥有设计馆了</view>
        </view>
        <view class='black-font font--white c-middle border-radius--8 c-theme-bg setUpshop-guide__btn' bindtap="handleApplyLifeStore">开馆指引</view>
      </view>

      <!-- 头条动态 -->
      <view class="page-section padding-top--0rpx border-bottom-radius">
        <view class="prevent-click__box"></view>
        <view class="flex_row headline padding-top-bottom--0rpx margin-bottom--0rpx">
          <view class="headline-side">
            <image src='../../images/set-up-shop-suona@2.png' class="icon-voice"></image>
            <text>开馆</text>
            <text>头条</text>
          </view>
          <view class="headline-line">
            <image src='../../images/set-up-shop-line.png' class="icon-line"></image>
          </view>

          <swiper circular autoplay vertical interval="{{5000}}" class="headline-body open-store__swiper">
            <swiper-item class="flex-direction__column--center" wx:for="{{ storeHeadlines }}" wx:for-index="idx" wx:for-item="headline" wx:key="{{ idx }}">
              <view wx:for="{{headline}}" wx:key="{{index}}" class="headline-group {{index==1?'margin-bottom--0rpx':''}}">
                <view class="headline-item one-line-text" wx:if="{{ item.event == 1 }}">
                  <label class="store-green">{{ item.username }}</label> {{ item.time }}开通了自己的设计馆
                </view>
                <view class="headline-item one-line-text" wx:if="{{ item.event == 4 }}">
                  「{{ item.username }}」的生活馆 {{ item.time }}
                  <label class="order-yellow">售出{{ item.quantity }}单</label>
                </view>
              </view>
            </swiper-item>
          </swiper>
        </view>
      </view>
    </view>

    <!-- 今日推荐 {{themeProduct.designs}} -->
    <view class='fx-part'>
      <view class='c-importantGoodsTitle time-top font-xl margin-top--60rpx category__title '>
        <text class='label'>今日推荐</text>
      </view>

      <scroll-view scroll-x class='c-importantGoodsBox margin-top--30rpx today-recommend-box'>
        <view class='today-recommend {{index==0?"padding-left--40rpx":""}} {{index==todayRecommendList.daily_recommends.length-1?"margin-right--40rpx":""}}' wx:for="{{todayRecommendList.daily_recommends}}" catchtap="handleTodyRecommend" data-type="{{item.target_type}}"
          data-id="{{item.id}}" data-rid="{{item.recommend_id}}" wx:key="{{index}}">
          <view class='all-product height---236rpx'>
            <image wx:if="{{item.cover}}" class="border-radius--8 {{readyOver?'load-over__null--photo':'loading-bg'}}" src="{{item.cover}}-p315x236"></image>

            <image wx:else class="border-radius--8 {{readyOver?'load-over__null--photo':'loading-bg'}}"></image>
          </view>
          <view class='recommend-text line-height--22rpx theme-green margin-top--4rpx padding-bottom--10rpx'>
            <text class='font-ss line-height--22rpx'>{{item.recommend_label}}</text>
          </view>
          <view class='recommend-text line-height--26rpx padding-bottom--10rpx'>
            <text class='font-width--medium font-m line-height--26rpx'>{{item.recommend_title}}</text>
          </view>
          <view class='recommend-text qian-hui line-height--22rpx padding-bottom--50rpx'>
            <text class='font-ss line-height--22rpx'>{{item.recommend_description}}</text>
          </view>
        </view>
      </scroll-view>
    </view>

    <!-- "免运，奖励，优惠生活" -->
    <view class='material-benefits'>
      <view class='material-benefits-top qian-hui font-s'>免运，奖励，优惠生活</view>
      <view class='material-benefits_bottom c-crosswise-a'>
        <view class='font-s fx-column--center' catchtap="handleGuessGame">
          <image src='../../images/guess-and-win-cash@2.png'></image>
          <view class="label">猜图赢现金</view>
        </view>
        <view class='font-s fx-column--center' catchtap="handleToreceiveCoupon">
          <image src='../../images/receiv-coupon@2x.png'></image>
          <view class="label">领劵中心</view>
        </view>
        <view class='font-s fx-column--center' catchtap="handleToExemptionFromPostage">
          <image src='../../images/no-logistics-icon@2x.png'></image>
          <view class="label">包邮专区</view>
        </view>
      </view>
    </view>

    <!-- 人气推荐 wx:for='{{currentNewProduct.products}}' -->
    <view class="position-r">
      <view class='human margin-top--40rpx'>
        人气推荐
      </view>

      <view class="round-right">
        <view class="{{item==gratefulSwiper?'bg--green':''}}" wx:for="{{[0,1,2]}}" wx:key="{{index}}"></view>
      </view>

      <swiper bindchange="handleGratefulSwiper" class='gratefulList-box margin-left--40rpx  margin-right--40rpx border-bottom'>
        <!-- 1 -->
        <swiper-item>
          <view class='production new-goods_box padding-left__right--0rpx padding-top--0rpx '>
            <view class='productionGoods {{index==2||index==3||index==4?"one-row-three":""}}' wx:if="{{index<5}}" wx:for="{{gratefulList.products}}" wx:key='{{index}}'>
              <fx-product product="{{item}}" like_number="{{true}}" photo="{{index==0 || index==1?5:1}}" photoSize="{{index==0 || index==1?'325x260':'30'}}" bind:triggerEvent_product='handleInfomation'></fx-product>
            </view>
          </view>
        </swiper-item>
        <!-- 2 -->
        <swiper-item>
          <view class='production new-goods_box padding-left__right--0rpx padding-top--0rpx'>
            <view wx:if="{{4<index && index<10}}" class='productionGoods {{index==7||index==8||index==9?"one-row-three":""}}' wx:for="{{gratefulList.products}}" wx:key='{{index}}'>
              <fx-product product="{{item}}" like_number="{{true}}" photo="{{index==5 || index==6?5:1}}" photoSize="{{index==5 || index==6?'325x260':'30'}}" bind:triggerEvent_product='handleInfomation'></fx-product>
            </view>
          </view>
        </swiper-item>
        <!-- 3 -->
        <swiper-item class="">
          <view class='production new-goods_box padding-left__right--0rpx padding-top--0rpx'>
            <view wx:if="{{9<index && index<15}}" class='productionGoods {{index==12||index==13||index==14?"one-row-three":""}}' wx:for="{{gratefulList.products}}" wx:key='{{index}}'>
              <fx-product product="{{item}}" like_number="{{true}}" photo="{{index==11 || index==10?5:1}}" photoSize="{{index==11 || index==10?'325x260':'30'}}" bind:triggerEvent_product='handleInfomation'></fx-product>
            </view>
          </view>
        </swiper-item>
      </swiper>
    </view>

    <!--中间 广告 -->
    <view class='probation-box advertisement-box height--680rpx margin-bottom--40rpx bg-white'>
      <swiper autoplay="{{true}}" indicator-color="rgba(0, 0, 0, .3)" indicator-active-color='#fff' bindchange="handleSwiperChange">
        <block wx:for="{{middleAdvertisementList.banner_images}}" data-rid="{{item.rid}}" wx:key="{{index}}">
          <swiper-item data-rid="{{item.rid}}" data-link="{{item.link}}" data-type="{{item.type}}" catchtap="handleToInfo">
            <image src="{{item.image}}" class="slide-image" width="355" height="150" />
          </swiper-item>
        </block>
      </swiper>

      <view class="flex_row find-swiper__round">
        <view wx:for="{{middleAdvertisementList.banner_images}}" class="{{swiperMark==index?'swiperActive':''}}" wx:key="{{index}}"></view>
      </view>
    </view>

    <!-- 发现生活美学 {{themeProduct.designs}}  橱窗 -->
    <view class='fx-part similar-windows box--margin border-top padding-left--0rpx'>
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--32rpx' catchtap="handleGoWindow">
        <text class="label">发现生活美学</text>
      </view>
      <scroll-view scroll-x class="scroll-windows">
        <view class="live-beautiful__window">
          <view class="life-beautiful___photo recommend-window__item margin-right--40rpx {{index==0?'margin-left--40rpx':''}} " catchtap="handleGoWindowDetail" data-window-rid="{{item.rid}}" wx:for="{{lifeWindow.shop_windows}}" wx:key="{{index}}">
            <view class="flex_row recommend-window__photo">
              <image src="{{item.product_covers[0]}}-p50" class="recommend-window__photo--big"></image>
              <view class="flex-direction--column">
                <image src="{{item.product_covers[1]}}-p30x2" class="recommend-window__photo--min"></image>
                <image src="{{item.product_covers[2]}}-p30x2" class="recommend-window__photo--min margin-top--4rpx"></image>
              </view>
            </view>

            <view class="recommend-window_info">
              <view class="flex_row margin-bottom--30rpx">
                <image class="master-photo" src="{{item.user_avatar}}-ava"></image>
                <text class="font-s font-width--medium">{{item.user_name}}</text>
              </view>
              <view class="black-font  font-width--medium title">{{item.title}}</view>
              <view class="font-s two-line-text describe">{{item.description}}</view>
            </view>
          </view>
        </view>
      </scroll-view>
    </view>

    <!-- 乐喜优选 -->
    <view class="fx-part">
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--40rpx' catchtap="handleToLexiPick">
        <text class="label">乐喜优选</text>
        <view class='hui-zi-m flex_row'>
          <text>查看全部</text>
          <text class='fx-icon-nothing-right'></text>
        </view>
      </view>
      <view class='production new-goods_box'>
        <view wx:if="{{index<4}}" class='productionGoods' wx:for="{{lexiPick.products}}" wx:key='{{index}}'>
          <fx-product product="{{item}}" photo="{{3}}" like_number="{{true}}" bind:triggerEvent_product='handleInfomation'></fx-product>
        </view>
      </view>
    </view>

    <!-- 种草清单 -->
    <view class="fx-part border-top">
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--40rpx' catchtap="handleToPlantNoteList">
        <text class="label">种草清单</text>
        <view class='hui-zi-m flex_row'>
          <text>查看全部</text>
          <text class='fx-icon-nothing-right'></text>
        </view>
      </view>
      <view class='plantnote-list'>
        <view wx:if="{{index<4}}" class='flex-direction--column plantnote-item' catchtap="handleToPlantNoteInfo" data-rid="{{item.rid}}" data-type="{{item.type}}" wx:for="{{plantOrderList.life_records}}" wx:key='{{index}}'>

          <image src="{{item.cover}}-p326x216" wx:if="{{item.cover}}" class="plantnote-item_cover img--style {{readyOver?'load-over__photo--juxing':'loading-bg'}} "></image>

          <image src="" wx:else class="plantnote-item_cover img--style {{readyOver?'load-over__photo--juxing':'loading-bg'}} "></image>
          <text class="plantnote-item_title font-s font-width--semibold text-two_line">{{item.title}}</text>
          <text class='plantnote-item_desc font-s shen-hui text-two_line'>{{item.description}}</text>
          <view class='plant-owner__box flex_row'>
            <image src="{{item.user_avator}}-ava" class='plant-owner__photo'></image>
            <text class="font-s shen-hui">{{item.user_name}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- 探索 -->
  <view class="bg-white page-explore {{ pageActiveTab == 'explore' ? 'active' : '' }}">

    <!-- 广告 -->
    <view class='probation-box advertisement-box'>
      <swiper autoplay="{{true}}" bindchange="handleExploreSwiperChange">
        <swiper-item data-rid="{{item.rid}}" data-link="{{item.link}}" data-type="{{item.type}}" catchtap="handleToInfo" wx:for="{{exploreAdvertisementList.banner_images}}" wx:key="{{index}}">
          <view class='advertisement-item'>
            <image src="{{item.image}}" class="slide-image" />
            <!-- <text class='explore-advertisement__title'>{{item.title}}</text> -->
            <!-- <text class='explore-advertisement__info'>{{item.description}}</text> -->
          </view>
        </swiper-item>
      </swiper>

      <view class="flex_row find-swiper__round bottom--86rpx">
        <view wx:for="{{exploreAdvertisementList.banner_images}}" class="{{exploreSwiperMark==index?'swiperActive':''}}" wx:key="{{index}}"></view>
      </view>

    </view>

    <!-- 分类的 -->
    <view class='product-category-box '>
      <scroll-view scroll-x class='flex_row slither-box'>
        <view class='fx-column--center inline-block padding--27rpx {{index==0?"padding-left--40rpx":""}} {{index==categoryList.categories.length-1?"padding-right--40rpx":""}}' catchtap="handleTocategoryList" data-title-name="{{item.name}}" data-id="{{item.id}}"
          wx:for="{{categoryList.categories}}" wx:key='{{index}}'>
          <view class='c-middle product-category-icon'>
            <image class="product-category-icon__item" src='{{item.cover}}'></image>
          </view>
          <view class='flex_row--middle font-s product-category-name'>{{item.name}}</view>
          <view class='flex_row--middle font-ss qian-hui height-22rpx product-category-count'>{{item.browse_count>0?item.browse_count+"人":" "}}</view>
        </view>
      </scroll-view>
    </view>

    <!-- 编辑推荐 {{themeProduct.designs}} -->
    <view class='fx-part border-bottom'>
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--32rpx' catchtap="handleToProductList" data-from="editRecommend">
        <text class="label">编辑推荐</text>
        <view class='hui-zi-m flex_row'>
          <text>查看全部</text>
          <text class='fx-icon-nothing-right'></text>
        </view>
      </view>
      <scroll-view scroll-x class='editor-recommend c-importantGoodsBox'>
        <view class='c-importantGoodsPhoto {{index==0?"margin-left--40rpx":""}} {{index==editRecommendList.length-1?"margin-right--40rpx":""}}' wx:for="{{editRecommendList}}" wx:key="{{index}}">
          <fx-product product="{{item}}" bind:triggerEvent_product="handleInfomation" photo="{{2}}" oldPrice="{{true}}"></fx-product>
        </view>
      </scroll-view>
    </view>

    <!-- 特色品牌馆 -->
    <view class='fx-part border-bottom min-height--570'>
      <view catchtap="handelTobrandList" class='c-importantGoodsTitle time-top font-xl category__title margin-top--32rpx'>
        <text class="label">特色品牌馆</text>
        <view class='hui-zi-m flex_row'>
          <text>查看全部</text>
          <text class='fx-icon-nothing-right'></text>
        </view>
      </view>

      <scroll-view scroll-x class='best-stores c-importantGoodsBox margin-top--34rpx recommend-product-box '>
        <view class='characteristic-box {{index==0?"margin-left--40rpx":""}} {{index==characteristicStoreList.stores.length-1?"margin-right--40rpx":""}}' wx:for="{{characteristicStoreList.stores}}" wx:for-item="items" catchtap="handleTobrandStore" data-rid="{{items.rid}}"
          wx:key="{{ index }}">
          <image src='{{items.bgcover}}-p50' wx:if="{{items.bgcover}}"></image>
          <image wx:else></image>
          <view class='characteristic-info border-radius--8'>
            <view class='flex_row characteristic-box__title border-radius--8'>
              <view class='characteristic-log'>
                <image class="border-radius--8 {{readyOver?'load-over__null--photo':'loading-bg'}}" src='{{items.logo}}'></image>
              </view>
              <view class='characteristic-title__text'>
                <text class='font--white font-xl text--hidden'>{{items.name}}</text>
                <view class='font-s brand-quantity--color'>{{items.store_products_counts>0?items.store_products_counts+"件":""}}</view>
              </view>
            </view>
            <view class='time-top characteristic-box__middle'>
              <view class='characteristic-photo' wx:for="{{items.products_cover}}" wx:key="{{index}}" wx:for-item="item" wx:if="{{index<3}}">
                <image class="{{ readyOver?'load-over__null--photo':'loading-bg'}}" src='{{item + "-p16" }}' wx:if="{{ item }}"></image>
              </view>

            </view>
            <view class='characteristic-watch_btn c-middle' data-index="{{index}}" data-rid="{{items.rid}}" catchtap="handleAddFollowed" wx:if="{{!items.is_followed}}">
              <image src='../../images/icon@2.png'></image>
              <text class='font--white black-font'>关注</text>
            </view>
            <view wx:else data-index="{{index}}" data-rid="{{items.rid}}" class='characteristic-watch_btn c-middle bg--hui' catchtap="handleDeleteFollowed">
              <text class='font--white black-font'>已关注</text>
            </view>
          </view>
        </view>
      </scroll-view>
    </view>

    <!-- 优质新品 {{themeProduct.designs}} -->
    <view class='fx-part border-bottom min-height--400'>
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--32rpx' catchtap="handleToProductList" data-from="highQualityList">
        <text class="label">优质新品</text>
        <view class='hui-zi-m flex_row'>
          <text>查看全部</text>
          <text class='fx-icon-nothing-right'></text>
        </view>
      </view>
      <scroll-view scroll-x class='best-products c-importantGoodsBox margin-top--34rpx recommend-product-box '>
        <view class='c-importantGoodsPhoto {{index==0?"padding-left--40rpx":""}} {{index==highQualityList.products.length-1?"margin-right--40rpx":""}}' wx:for="{{highQualityList.products}}" wx:key="{{index}}">
          <fx-product product="{{item}}" photo="{{2}}" bind:triggerEvent_product="handleInfomation" oldPrice="{{true}}"></fx-product>
        </view>
      </scroll-view>
    </view>

    <!-- 集合 {{themeProduct.designs}} -->
    <view class='fx-part border-bottom min-height--300'>
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--32rpx' catchtap="hanleToGatherPage">
        <text class='label'>集合</text>
        <view class='hui-zi-m flex_row'>
          <text>查看全部</text>
          <text class='fx-icon-nothing-right'></text>
        </view>
      </view>
      <scroll-view scroll-x class='best-collections c-importantGoodsBox'>
        <view class='all-product {{index==0?"margin-left--40rpx":""}} {{index==gatherList.collections.length-1?"margin-right--40rpx":""}}' data-rid="{{item.id}}" catchtap="handleToGatherInfo" wx:for="{{gatherList.collections}}" wx:key="{{index}}">
          <image class="border-radius--8 {{readyOver?'load-over__null--photo':'loading-bg'}}" wx:if="{{item.cover}}" src="{{item.cover}}-p30x2"></image>

          <image wx:else class="border-radius--8 {{readyOver?'load-over__null--photo':'loading-bg'}}"></image>
          <view class='bg-black__half'>
            <image src='../../images/bg-hei.png'></image>
          </view>
          <view class='competitive-pick-icon font-xss shen-hui c-middle'>精选</view>
          <view class='all-product_geishei font--white black-font'>{{item.name}}</view>
          <view class='all-product_miaoshu font--white black-font'>{{item.sub_name}}</view>
        </view>
      </scroll-view>
    </view>

    <!-- 特惠好设计 {{themeProduct.designs}} -->
    <view class='fx-part border-bottom min-height--400'>
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--32rpx' data-from="goodDesign" catchtap="handleToProductList">
        <text class="label">特惠好设计</text>
        <view class='hui-zi-m flex_row'>
          <text>查看全部</text>
          <text class='fx-icon-nothing-right'></text>
        </view>
      </view>
      <scroll-view scroll-x class='best-sales c-importantGoodsBox'>
        <view class='c-importantGoodsPhoto {{index==0?"margin-left--40rpx":""}} {{index==goodDesignList.products.length-1?"margin-right--40rpx":""}}' wx:for="{{goodDesignList.products}}" wx:key="{{index}}">
          <fx-product photoSize="30" photo="{{2}}" product="{{item}}" bind:triggerEvent_product="handleInfomation" oldPrice="{{true}}"></fx-product>
        </view>
      </scroll-view>
    </view>

    <!-- 百元好物 {{themeProduct.designs}} -->
    <view class='fx-part border-bottom min-height--400'>
      <view class='c-importantGoodsTitle time-top font-xl category__title margin-top--32rpx' catchtap="handleToProductList" data-from="oneHundred">
        <text class="label">百元好物</text>
        <view class='hui-zi-m flex_row'>
          <text>查看全部</text>
          <text class='fx-icon-nothing-right'></text>
        </view>
      </view>
      <scroll-view scroll-x class='best-100 c-importantGoodsBox'>
        <view class='c-importantGoodsPhoto height--372rpx {{index==0?"margin-left--40rpx":""}} {{index==oneHundredList.products.length-1?"margin-right--40rpx":""}}' wx:for="{{oneHundredList.products}}" wx:key="{{index}}">
          <fx-product product="{{item}}" photoSize="30" photo="{{2}}" bind:triggerEvent_product="handleInfomation" oldPrice="{{true}}"></fx-product>
        </view>
      </scroll-view>
    </view>

  </view>

  <!-- 橱窗 -->
  <view class="bg-white page-explore {{ pageActiveTab == 'window' ? 'active' : '' }} window-page">
    <view>

      <!-- 头图 -->
      <view class="page-section headline" style="background:url('https://static.moebeast.com/image/static/shop_window_head.jpg ');background-size:100% 100%; ">
        <image></image>
        <view class="mask">
          <view class="content">
            <view class="big-title">
              发现生活美学
            </view>
            <view class="description">
              发掘好物，品味生活，
            </view>
            <view class="description02">
              寻找搭配灵感，塑造自己的独特风格
            </view>
          </view>
        </view>
      </view>

      <!-- tabs -->
      <view class="fx-tabs height--80rpx">
        <view class="tab-item {{categoryActive==item.code?'active':''}}" wx:for="{{category}}" catchtap='handleToggleCategory' data-code="{{item.code}}" wx:key="{{index}}">
          <text>{{item.name}}</text>
        </view>
      </view>

      <!-- 橱窗列表 -->
      <view class="fx-windows">
        <!-- 推荐 -->
        <block wx:if="{{categoryActive=='recommend'}}">
          <view class="fx-window" wx:for="{{recommendWindow.shop_windows}}" wx:if="{{recommendWindow.count!=0}}" wx:key="{{index}}">
            <view class="fx-window__author">
              <view class="author-info">
                <image src="{{item.user_avatar}}-ava" class="avatar border-round"></image>
                <label class="name font-width--medium">{{item.user_name}}</label>
                <image src="../../images/icons/icon-star@3x.png" class="icon-star" wx:if="{{ item.is_expert }}"></image>
                <image wx:if="{{ item.is_official }}" src="../../images/icons/icon-offical@3x.png" class="icon-offical"></image>
              </view>
              <button class="btn-follow fx-button--text primary black-font" wx:if="{{!item.is_follow && myUid!=item.uid}}" data-index="{{index}}" data-uid="{{item.uid}}" catchtap="handleAddFollow">关注</button>
              <button class="btn-follow fx-button--text primary qian-hui black-font" data-index="{{index}}" data-uid="{{item.uid}}" wx:if="{{item.is_follow && myUid!=item.uid}}" catchtap="handleDeleteFollow">已关注</button>
            </view>

            <view class="fx-window__images" data-window-rid="{{item.rid}}" catchtap="handleGoWindowDetail">
              <view class="image-container">
                <view class="image-item">
                  <image src="{{item.product_covers[0]}}-p50" class="photo"></image>
                </view>
              </view>
              <view class="image-container half">
                <view class="image-item">
                  <image src="{{item.product_covers[1]}}-p30x2" class="photo"></image>
                </view>
                <view class="image-item">
                  <image src="{{item.product_covers[2]}}-p30x2" class="photo"></image>
                  <label class="surplus-count" wx:if="{{item.product_covers.length>3}}">+{{item.product_covers.length-3}}</label>
                </view>
              </view>
            </view>

            <view class="fx-window__actions">
              <view class="like-comment">
                <view class="done ">
                  <image wx:if="{{item.is_like}}" catchtap="handleDeleteLike" data-rid="{{item.rid}}" src="../../images/icons/icon-like-active@3x.png" class="icon-like"></image>
                  <image wx:else catchtap="handleAddLike" data-rid="{{item.rid}}" src="../../images/icons/icon-like@3x.png" class="icon-like"></image>
                  <image src="../../images/icons/icon-comment@3x.png" class="icon-comment"></image>
                </view>
                <view class="remark">
                  <text class="{{item.like_count==0?'like-hide':''}}">{{item.like_count}}喜欢 </text>
                  <i wx:if="{{item.like_count!=0&&item.comment_count!=0}}"> · </i>
                  <text wx:if="{{item.comment_count!=0}}"> {{item.comment_count}}条评论</text>
                </view>
              </view>
              <view class="share">
                <view class="done" data-window-rid="{{ item.rid }}" catchtap="handleWindowShareModal">
                  <image src="../../images/icons/icon-share@3x.png" class="icon-share"></image>
                </view>
              </view>
            </view>

            <view class="fx-window__body">
              <view class="title line-height--30rpx margin-bottom--24rpx"> {{item.title}} </view>
              <view class="summary "> {{item.description}} </view>
              <view class="keywords line-height--24rpx">
                <label wx:for="{{item.keywords}}" wx:for-item="single" wx:key="{{index}}">#{{single}}</label>
              </view>

            </view>
          </view>

          <!-- 推荐的缺省图 -->
          <view wx:if="{{recommendWindow.count==0}}"></view>
        </block>

        <!-- 关注 -->
        <block wx:if="{{categoryActive=='follow'}}">
          <view class="fx-window" wx:for="{{followWindow.shop_windows}}" wx:key="{{index}}">
            <view class="fx-window__author">
              <view class="author-info">
                <image src="{{item.user_avatar}}-ava" class="avatar border-round"></image>
                <label class="name">{{item.user_name}}</label>
                <image src="../../images/icons/icon-star@3x.png" class="icon-star" wx:if="{{ item.is_expert }}"></image>
                <image wx:if="{{item.is_official}}" src="../../images/icons/icon-offical@3x.png" class="icon-offical"></image>
              </view>
              <button class="btn-follow fx-button--text primary black-font" data-uid="{{item.uid}}" data-index="{{index}}" catchtap="handleAddFollow" wx:if="{{!item.is_follow}}">关注</button>
              <button catchtap="handleDeleteFollow" data-uid="{{item.uid}}" data-index="{{index}}" class="btn-follow fx-button--text primary black-font qian-hui " wx:else>已关注</button>
            </view>

            <view class="fx-window__images" data-window-rid="{{item.rid}}" catchtap="handleGoWindowDetail">
              <view class="image-container">
                <view class="image-item">
                  <image src="{{item.product_covers[0]}}-p50" class="photo"></image>
                </view>
              </view>
              <view class="image-container half">
                <view class="image-item">
                  <image src="{{item.product_covers[1]}}-p30x2" class="photo"></image>
                </view>
                <view class="image-item">
                  <image src="{{item.product_covers[2]}}-p30x2" class="photo"></image>
                  <label class="surplus-count" wx:if="{{item.product_covers.length>3}}">+{{item.product_covers.length-3}}</label>
                </view>
              </view>
            </view>

            <view class="fx-window__actions">
              <view class="like-comment">
                <view class="done">
                  <image catchtap="handleDeleteLike" data-rid="{{item.rid}}" wx:if="{{item.is_like}}" src="../../images/icons/icon-like-active@3x.png" class="icon-like"></image>
                  <image wx:else catchtap="handleAddLike" data-rid="{{item.rid}}" src="../../images/icons/icon-like@3x.png" class="icon-like"></image>
                  <image src="../../images/icons/icon-comment@3x.png" class="icon-comment"></image>
                </view>
                <view class="remark">
                  <text wx:if="{{item.like_count!=0}}">{{item.like_count}}喜欢 </text>
                  <text wx:if="{{item.comment_count!=0}}">· {{item.comment_count}}条评论</text>
                </view>
              </view>
              <view class="share">
                <view class="done" data-window-rid="{{ item.rid }}" catchtap="handleWindowShareModal">
                  <image src="../../images/icons/icon-share@3x.png" class="icon-share"></image>
                </view>
              </view>
            </view>

            <view class="fx-window__body">
              <view class="title line-height--30rpx margin-bottom--24rpx"> {{item.title}} </view>

              <view class="summary"> {{item.description}} </view>

              <view class="keywords line-height--24rpx">
                <label wx:for="{{item.keywords}}" wx:for-item="single" wx:key="{{index}}">#{{single}}</label>
              </view>

            </view>
          </view>
        </block>

        <view class="window-publish" wx:if="{{ runEnv == 2 }}">
          <button class="fx-button--text btn-plus" catchtap="handleGoAddWindow">
            <text>拼贴我的橱窗</text>
            <image src="../../images/icons/icon-plus@3x.png" class="icon-plus"></image>
          </button>
        </view>
      </view>

      <!-- 登陆注册模态框 -->
      <fx-login visible="{{ is_mobile }}" bind:closeEvent="hanleOffLoginBox"></fx-login>
    </view>


  </view>

  <!-- 登陆注册模态框 -->
  <fx-login visible="{{ is_mobile }}" bind:closeEvent="handleCloseLogin"></fx-login>

  <!-- 回到自己的生活馆 -->
  <view class="fx-back-home" bindtap="handleBackLifeStore" wx:if="{{ pageActiveTab == 'lifeStore' && showBack }}">
    <image src="../../images/icon-back-home@2x.png" class="icon-back-home"></image>
    <text>回到自己生活馆</text>
  </view>

  <!-- 编辑生活馆信息 -->
  <fx-modal-v visible="{{ showEditModal }}" title="编辑生活馆">
    <form class="fx-form edit-form" bindsubmit="handleSubmitUpdateStore">
      <view class="fx-input">
        <label class="field-label">名称</label>
        <view class="fx-input__inner">
          <input type="text" class="field" name="name" value="{{ lifeStore.name }}" placeholder="生活馆名称" maxlength="16" bindinput="handleNameChange" />
          <view class="word-length">
            <label class="input-length">{{ storeForm.nameLength }}</label>
            <label>/16</label>
          </view>
        </view>
      </view>

      <view class="fx-input">
        <label class="field-label">简介</label>
        <view class="fx-input__inner">
          <textarea maxlength="140" class="field-text" bindinput="handleDescChange" name="description" placeholder="欢迎来到我的乐喜生活馆，我推荐了一些好设计供你挑选。" value="{{ lifeStore.description }}" />
          <view class="word-length">
            <label class="input-length">{{ storeForm.descLength }}</label>
            <label>/40</label>
          </view>
        </view>
      </view>

      <view class="btn-area">
        <button class="fx-button primary" formType="submit">保存</button>
      </view>
    </form>
  </fx-modal-v>

  <!-- 卖 -->
  <fx-modal showHead="{{ false }}" visible="{{ showShareModal }}" bind:closeEvent="handleCancelShare">
    <view class="fx-modal__main distribute-share" slot="main">
      <view class="distribute-commission">
        <block wx:if="{{isDistributed&&isSmallB}}">
          <text>赚</text>
          <text class="amount">￥{{ shareProduct.commission_price }}</text>
        </block>
      </view>
      <view class="distribute-message">
        朋友通过你分享的此链接和图片购买商品，你即可赚取相应收益! 收益仅自己可见
      </view>
      <view class="distribute-style">
        <button class="share-friend wxa-card" data-from="2" open-type="share">
          <image src="{{ shareProduct.cover }}" class="cover"></image>
          <text>点击直接分享好友样式</text>
        </button>

        <view class="wxa-poster" bindtap="handleSaveShare">
          <view class="cover">
            <image src="{{ posterUrl }}" class="image" wx:if="{{ posterUrl }}"></image>
            <image src="../../images/jiazai.gif" class="loading" wx:else></image>
          </view>
          <text class="margin-top--14rpx">保存分享朋友圈海报</text>
        </view>
      </view>
      <view class="distribute-action">
        <view class="share-friend">
          <button open-type="share" data-from="2" class="share-btn">
          </button>
          <image src="../../images/wx-icon@2.png" class="icon-wechat"></image>
          <text>微信好友</text>
        </view>
        <view class="share-save" bindtap="handleSaveShare">
          <image src="../../images/save@2.png" class="icon-save"></image>
          <text>保存分享</text>
        </view>
      </view>
      <view class="distribute-cancle" bindtap="handleCancelShare">
        取消
      </view>
    </view>
  </fx-modal>

  <!-- 分享生活馆 -->
  <fx-modal showHead="{{ false }}" visible="{{ isShowShareLifeBrand }}" bind:closeEvent="handleOffLifeStore">
    <view class="fx-modal__main distribute-share" slot="main">
      <view class="distribute-commission">
        <block wx:if="{{isDistributed&&isSmallB}}">
        </block>
      </view>
      <view class="distribute-message">
      </view>
      <view class="distribute-style">
        <button class="share-friend wxa-card" data-from="1" open-type="share">
          <image src="{{ lifePhotoUrl }}" class="cover"></image>
          <text>点击直接分享好友样式</text>
        </button>

        <view class="wxa-poster" bindtap="handleSaveShare">
          <view class="cover">
            <image src="{{ lifeStorePosterUrl }}" class="image" wx:if="{{ lifeStorePosterUrl }}"></image>
            <image src="../../images/jiazai.gif" class="loading" wx:else></image>
          </view>
          <text class="margin-top--14rpx">保存分享朋友圈海报</text>
        </view>
      </view>
      <view class="distribute-action">
        <view class="share-friend">
          <button open-type="share" data-from="1" class="share-btn">
          </button>
          <image src="../../images/wx-icon@2.png" class="icon-wechat"></image>
          <text>微信好友</text>
        </view>
        <view class="share-save" bindtap="handleSaveLifeStorePhoto">
          <image src="../../images/save@2.png" class="icon-save"></image>
          <text>保存分享</text>
        </view>
      </view>
      <view class="distribute-cancle" bindtap="handleOffLifeStore">
        取消
      </view>
    </view>
  </fx-modal>

  <!-- 橱窗海报图 -->
  <fx-image-modal visible="{{ showPosterModal }}" marginTop="50" width="520" close="{{ false }}" bind:closeEvent="handleClearPosterUrl">
    <view class="fx-poster">
      <view class="poster-box">
        <image src="{{ windowPosterUrl }}" class="poster-image" wx:if="{{ windowPosterUrl }}"></image>
        <image src="../../images/jiazai.gif" class="loading" wx:else></image>
      </view>
      <view class="btn-area">
        <button class="fx-button primary" bindtap="handleSaveWindowPoster">
          {{ posterBtnText }}
        </button>
      </view>
    </view>
  </fx-image-modal>

  <!-- 分享的悬浮按钮 -->
  <view class='time-top suspend-share bg-white font-s' wx:if="{{pageActiveTab=='lifeStore'}}" catchtap="handleShareLifeBrand">
    <view class='suspend-share_box c-theme-bg c-middle'>
      <image src='../../images/fei@2.png'></image>
    </view>
    <text class='suspend-share__text'>分享</text>
    <!-- <button open-type="share" data-shareStore='{{rid}}' data-from="1"></button> -->
  </view>

</view>